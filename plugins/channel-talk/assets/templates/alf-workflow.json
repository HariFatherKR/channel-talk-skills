{
  "_comment": "ì±„ë„í†¡ ALF ì›Œí¬í”Œë¡œìš° í…œí”Œë¦¿",
  "_description": "ì´ íŒŒì¼ì€ ALF ì›Œí¬í”Œë¡œìš°ì˜ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ì‹¤ì œ ì›Œí¬í”Œë¡œìš°ëŠ” ì±„ë„í†¡ ëŒ€ì‹œë³´ë“œì—ì„œ ìƒì„±í•©ë‹ˆë‹¤.",

  "workflow": {
    "name": "ì£¼ë¬¸ ì¡°íšŒ ì›Œí¬í”Œë¡œìš°",
    "description": "ê³ ê°ì´ ì£¼ë¬¸ ì¡°íšŒë¥¼ ìš”ì²­í•  ë•Œ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ì›Œí¬í”Œë¡œìš°",

    "nodes": [
      {
        "id": "trigger",
        "type": "trigger",
        "config": {
          "triggerType": "keyword",
          "keywords": ["ì£¼ë¬¸", "ì£¼ë¬¸ì¡°íšŒ", "ë°°ì†¡", "ë°°ì†¡ì¡°íšŒ"]
        },
        "next": "ask_order_number"
      },

      {
        "id": "ask_order_number",
        "type": "message",
        "config": {
          "text": "ì£¼ë¬¸ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\n\nì£¼ë¬¸ë²ˆí˜¸ëŠ” ì£¼ë¬¸ í™•ì¸ ì´ë©”ì¼ì´ë‚˜ ë§ˆì´í˜ì´ì§€ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
          "waitForInput": true
        },
        "next": "fetch_order"
      },

      {
        "id": "fetch_order",
        "type": "code",
        "config": {
          "code": "const axios = require('axios')\n\nexport const handler = async (memory, context) => {\n  const orderNumber = memory.get('userInput')\n  \n  try {\n    const response = await axios.get(`https://your-api.com/orders/${orderNumber}`)\n    const order = response.data\n    \n    memory.put('orderFound', true)\n    memory.put('orderStatus', order.status)\n    memory.put('orderProduct', order.productName)\n    memory.put('deliveryDate', order.estimatedDelivery)\n  } catch (error) {\n    memory.put('orderFound', false)\n  }\n  \n  memory.save()\n}"
        },
        "next": "check_order"
      },

      {
        "id": "check_order",
        "type": "condition",
        "config": {
          "conditions": [
            {
              "if": "memory.orderFound === true",
              "then": "show_order_info"
            }
          ],
          "else": "order_not_found"
        }
      },

      {
        "id": "show_order_info",
        "type": "message",
        "config": {
          "text": "ì£¼ë¬¸ ì •ë³´ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤!\n\nğŸ“¦ ìƒí’ˆ: {{memory.orderProduct}}\nğŸ“‹ ìƒíƒœ: {{memory.orderStatus}}\nğŸšš ì˜ˆìƒ ë°°ì†¡ì¼: {{memory.deliveryDate}}\n\nì¶”ê°€ë¡œ ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”.",
          "buttons": [
            {
              "label": "ë°°ì†¡ ë³€ê²½ ë¬¸ì˜",
              "action": "delivery_change"
            },
            {
              "label": "í™˜ë¶ˆ ìš”ì²­",
              "action": "refund_request"
            },
            {
              "label": "ìƒë‹´ì› ì—°ê²°",
              "action": "connect_agent"
            }
          ]
        },
        "next": "end"
      },

      {
        "id": "order_not_found",
        "type": "message",
        "config": {
          "text": "ì£„ì†¡í•©ë‹ˆë‹¤. ì…ë ¥í•˜ì‹  ì£¼ë¬¸ë²ˆí˜¸ë¡œ ì£¼ë¬¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\nì£¼ë¬¸ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì‹œê±°ë‚˜, ìƒë‹´ì›ì—ê²Œ ë¬¸ì˜í•´ì£¼ì„¸ìš”.",
          "buttons": [
            {
              "label": "ë‹¤ì‹œ ì…ë ¥í•˜ê¸°",
              "action": "retry"
            },
            {
              "label": "ìƒë‹´ì› ì—°ê²°",
              "action": "connect_agent"
            }
          ]
        },
        "next": "handle_not_found_action"
      },

      {
        "id": "handle_not_found_action",
        "type": "condition",
        "config": {
          "conditions": [
            {
              "if": "memory.buttonAction === 'retry'",
              "then": "ask_order_number"
            },
            {
              "if": "memory.buttonAction === 'connect_agent'",
              "then": "connect_agent"
            }
          ],
          "else": "end"
        }
      },

      {
        "id": "connect_agent",
        "type": "connect_agent",
        "config": {
          "message": "ìƒë‹´ì›ì—ê²Œ ì—°ê²° ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.",
          "team": "support"
        },
        "next": "end"
      },

      {
        "id": "end",
        "type": "end",
        "config": {
          "message": null
        }
      }
    ]
  },

  "_examples": {
    "í™˜ë¶ˆ_ìš”ì²­_ì›Œí¬í”Œë¡œìš°": {
      "trigger": "í‚¤ì›Œë“œ: í™˜ë¶ˆ, ì·¨ì†Œ, ë°˜í’ˆ",
      "flow": [
        "í™˜ë¶ˆ ì‚¬ìœ  ì„ íƒ (ë²„íŠ¼)",
        "ì£¼ë¬¸ë²ˆí˜¸ ì…ë ¥ ìš”ì²­",
        "í™˜ë¶ˆ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸ (ì½”ë“œë…¸ë“œ)",
        "VIP ê³ ê° ì—¬ë¶€ ì²´í¬ (ì¡°ê±´)",
        "VIP â†’ ìƒë‹´ì› ìš°ì„  ì—°ê²°",
        "ì¼ë°˜ â†’ í™˜ë¶ˆ ì ‘ìˆ˜ ì™„ë£Œ ë©”ì‹œì§€"
      ]
    },

    "ì¿ í°_ë°œê¸‰_ì›Œí¬í”Œë¡œìš°": {
      "trigger": "ë²„íŠ¼: ì¿ í° ë°›ê¸°",
      "flow": [
        "ë°œê¸‰ ê°€ëŠ¥ ì¿ í° ì¡°íšŒ (ì½”ë“œë…¸ë“œ)",
        "ì¿ í° ëª©ë¡ í‘œì‹œ (ë²„íŠ¼)",
        "ì„ íƒí•œ ì¿ í° ë°œê¸‰ (ì½”ë“œë…¸ë“œ)",
        "ë°œê¸‰ ê²°ê³¼ ì•ˆë‚´"
      ]
    }
  },

  "_variables": {
    "ì‚¬ìš©_ê°€ëŠ¥_ë³€ìˆ˜": [
      "{{user.id}} - ê³ ê° ID",
      "{{user.profile.name}} - ê³ ê° ì´ë¦„",
      "{{user.profile.email}} - ê³ ê° ì´ë©”ì¼",
      "{{memory.key}} - ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ê°’",
      "{{userChat.id}} - í˜„ì¬ ìƒë‹´ ID"
    ]
  }
}
